
<xsl:template match="hcontainer">
    <table cellspacing="0" cellpadding="0" style="width: {x:css(@width, 'auto')}; height: {x:css(@height, 'auto')};">
         <tr>
             <xsl:for-each select="*">
                <td style="padding-bottom: {x:css(../@spacing, '4')}">
                    <xsl:apply-templates select="." />
                </td>
             </xsl:for-each>    
         </tr>
    </table>
</xsl:template>

<xsl:template match="vcontainer">
     <table cellspacing="0" cellpadding="0" style="width: {x:css(@width, 'auto')}; height: {x:css(@height, 'auto')};">
         <xsl:for-each select="*">
             <tr><td style="padding-bottom: {x:css(../@spacing, '4')}">  
                 <xsl:apply-templates select="."/>
             </td></tr>
         </xsl:for-each>    
    </table>
</xsl:template>


<xsl:template match="category">
    <a href="#" onclick="javascript:return ajax('/handle/category/click/{@id}');">
	    <div class="{x:iif(@selected, 'ui-el-category-selected', 'ui-el-category')}">
		    <table>
                <tr>
                    <td rowspan="2" class="ui-el-category-icon">
                        <img src="{@icon}" />
                    </td>
                    <td class="ui-el-category-text">
                        <xsl:value-of select="@name"/>
                    </td>
                </tr>
            </table>
        </div>
    </a>
</xsl:template>

<xsl:template match="categoryfolder">
    <a href="#" onclick="javascript:ui_categoryfolder('{@id}');">
	    <div class="ui-el-categoryfolder" id="{@id}">
		    <table>
                <tr>
                    <td rowspan="2" class="ui-el-category-icon">
                        <img src="{@icon}" />
                    </td>
                    <td class="ui-el-category-text">
                        <xsl:value-of select="@text"/>
                    </td>
                </tr>
            </table>
        </div>
    </a>
    <div class="ui-el-categoryfolder-children" id="{@id}-children"
        style="display:none">
        <xsl:apply-templates />
    </div>
    <xsl:if test="@expanded = 'true'">
        <script>
            ui_categoryfolder('{@id}')
        </script>
    </xsl:if>
</xsl:template>

<widgets xmlns="http://www.w3.org/1999/xhtml"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:py="http://genshi.edgewall.org/"
         py:strip="" >




<!--! Custom HTML widget -->
<py:match path="customhtml">
    <div id="${select('@id')}" />
    <script>
         ui_fill_custom_html('${select('@id')}', '${select('@html')}');
    </script>
</py:match>


<!--! Refresher -->
<py:match path="refresh">
    <script>scheduleRefresh(${str(select('@time'))})</script>
</py:match>


<!--! ErrorBox widget -->
<py:match path="errorbox">
    <div class="ui-el-error" width="${select('@width')}" height="${select('@height')}">
        <div class="ui-el-error-title">
            <label text="${select('@title')}" size="2" />
        </div>
        <div class="ui-el-error-content">
           <img src="/dl/core/ui/warning.png" class="ui-el-error-icon" />
           <label text="${select('@text')}" />
        </div>
    </div>
</py:match>


<!--! PluginPanel widget -->
<py:match path="pluginpanel">
    <div class="ui-el-pluginpanel">
        <div class="ui-el-pluginpanel-head">
            <hcontainer>
                <hnode spacing="0"><image file="${select('@icon')}" /></hnode>
                <hnode>
                    <vcontainer>
                        <vnode spacing="0"><label text="${select('@title')}" size="5" /></vnode>
                        <vnode spacing="0"><div style="padding-left: 3px;">${select('*[1]')}</div></vnode>
                    </vcontainer>
                </hnode>
            </hcontainer>
        </div>
        <div class="ui-el-pluginpanel-content">
           ${select('*[2]')}
        </div>
    </div>
</py:match>





<!--! Widget for CategoryFolder -->


<!--! DialogBox widget -->
<!--! Attributes
@id
@title
@width
@height
-->
<py:match path="dialogbox">
    <div class="ui-el-modal-blackout" />
    <div class="ui-el-modal-wrapper" id="${select('@id')}-wr">
        <div id="${select('@id')}">
            <input id="${select('@id')}-url" type="hidden" name="url" value="/handle/dialog/submit/${select('@id')}"/>
            <div class="ui-el-dialog" width="${select('@width')}" height="${select('@height')}">
                <div class="ui-el-dialog-title"><label text="${select('@title')}" size="2" /></div>
                <div class="ui-el-dialog-content">
                    ${select('node()')}
                    <div class="ui-el-modal-buttons">
                        <table cellspacing="0" cellpadding="0">
                            <tr>
                            <py:choose test="">
                                <td py:when="str(select('@hideok'))" />
                                <td py:otherwise=""><button text="OK" onclick="form" action="OK" form="${select('@id')}"/></td>
                            </py:choose>
                            <py:choose test="">
                                <td py:when="str(select('@hidecancel'))" />
                                <td py:otherwise=""><button text="Cancel" onclick="form" action="Cancel" form="${select('@id')}"/></td>
                            </py:choose>
                            <py:choose test="">
                                <td py:when="str(select('@miscbtn'))"><button id="${select('@miscbtnid')}" text="${select('@miscbtn')}" /></td>
                                <td py:otherwise=""/>
                            </py:choose>
                        </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script> ui_center('${select('@id')}-wr'); </script>
</py:match>


<!--! FormBox widget -->

<py:match path="formbox">
        <div id="${select('@id')}">
                <input id="${select('@id')}-url" type="hidden" name="url" value="/handle/form/submit/${select('@id')}"/>
                ${select('node()')}
                <div class="ui-el-modal-buttons">
                <table cellspacing="0" cellpadding="0">
                    <tr>
                    <py:choose test="">
                         <td py:when="str(select('@hideok'))" />
                         <td py:otherwise=""><button text="OK" onclick="form" action="OK" form="${select('@id')}"/></td>
                    </py:choose>
                    <py:choose test="">
                         <td py:when="str(select('@hidecancel'))" />
                         <td py:otherwise=""><button text="Cancel" onclick="form" action="Cancel" form="${select('@id')}"/></td>
                    </py:choose>
                    <py:choose test="">
                        <td py:when="str(select('@miscbtn'))"><button id="${select('@miscbtnid')}" text="${select('@miscbtn')}" /></td>
                        <td py:otherwise=""/>
                    </py:choose>
                   </tr>
                </table>
            </div>
        </div>
</py:match>

<!--! ProgressBox widget -->

<py:match path="progressbox">
    <div class="ui-el-modal-blackout" />
    <div class="ui-el-modal-wrapper" id="${select('@id')}-wr">
            <div class="ui-el-dialog" width="${select('@width')}" height="${select('@height')}">
                <div class="ui-el-dialog-title"><label text="${select('@title')}" size="2" /></div>
                <div class="ui-el-dialog-content">
                    <vcontainer>
                        <vnode><image file="/dl/core/ui/ajax-big.gif" /></vnode>
                        <vnode><spacer height="10" /></vnode>
                        <vnode><label text="${select('@status')}" /></vnode>
                    </vcontainer>
                </div>
            </div>
    </div>
    <script>
        scheduleRefresh(3000);
        ui_center('${select('@id')}-wr');
    </script>
</py:match>

<!--! InputBox widget -->

<py:match path="inputbox">
    <div class="ui-el-modal-blackout" />
    <div class="ui-el-modal-wrapper" id="${select('@id')}-wr">
        <div name="${select('@id')}" id="${select('@id')}">
            <div class="ui-el-dialog" width="${select('@width')}" height="${select('@height')}">
                <input id="${select('@id')}-url" type="hidden" name="url" value="/handle/dialog/submit/${select('@id')}"/>
                <div class="ui-el-dialog-title"><label text="${select('@title')}" size="2" /></div>
                <div class="ui-el-dialog-content">
                    <vcontainer>
                        <vnode><label text="${select('@text')}"/></vnode>
                        <vnode><textinput name="value" value="${select('@value')}"/></vnode>
                    </vcontainer>
                    <div class="ui-el-modal-buttons">
                        <hcontainer>
                            <hnode><button text="OK" onclick="form" action="OK" form="${select('@id')}"/></hnode>
                            <hnode><button text="Cancel" onclick="form" action="Cancel" form="${select('@id')}"/></hnode>
                        </hcontainer>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        ui_center('${select('@id')}-wr');
    </script>
</py:match>

<!--! Container widget -->
<py:match path="container">
    ${select('node()')}
</py:match>

<!--! VContainer widget -->



<!--! HContainer widget -->
<py:match path="hcontainer">
    <table cellspacing="0" cellpadding="0" style="width: ${str(select('@width')) or 'auto'}; height: ${str(select('@height')) or 'auto'};">
        <tr>
            ${select('node()')}
        </tr>
    </table>
</py:match>
<py:match path="hnode">
    <td style="padding-right: ${str(select('@spacing')) or '4'}px">${select('node()')}</td>
</py:match>


<!--! Spacer -->
<py:match path="spacer">
    <div style="width: ${str(select('@width')) or None}px; height: ${str(select('@height')) or '1'}px;" />
</py:match>


<!--! Label widget -->
<py:match path="label">
    <span class="ui-el-label-${str(select('@size')) or '1'}" style="${'font-weight: bold;' if str(select('@bold')) == 'True' else None}">
        ${select('@text')}
    </span>
</py:match>


<!--! Image -->
<py:match path="image">
    <img class="ui-el-image" src="${select('@file')}" />
</py:match>


<!--! Button widget -->
<py:match path="button">
    <py:choose test="">
        <a py:when="str(select('@onclick')) == 'form'" href="#"
                onclick="javascript:return ajaxForm('${select('@form')}', '${select('@action')}');">
            <div class="ui-el-button"> ${select('@text')} </div>
        </a>
        <a py:otherwise="" href="#" onclick="javascript:return ajax('/handle/button/click/${select('@id')}');">
            <div class="ui-el-button"> ${select('@text')} </div>
        </a>
    </py:choose>
</py:match>

<!--! WarningButton widget -->
<py:match path="warningbutton">
    <py:choose test="">
        <a href="#" onclick="javascript:if (confirm('Are you sure?')) return ajax('/handle/button/click/${select('@id')}');">
            <div class="ui-el-button"> ${select('@text')} </div>
        </a>
    </py:choose>
</py:match>

<!--! MiniButton widget -->
<py:match path="minibutton">
    <a href="#" onclick="javascript:return ajax('/handle/minibutton/click/${select('@id')}');">
        <div class="ui-el-minibutton"> ${select('@text')} </div>
    </a>
</py:match>

<!--! WarningMiniButton widget -->
<py:match path="warningminibutton">
    <a href="#" onclick="javascript:if (confirm('Are you sure?')) return ajax('/handle/minibutton/click/${select('@id')}');">
        <div class="ui-el-minibutton"> ${select('@text')} </div>
    </a>
</py:match>


<!--! LinkLabel widget -->
<py:match path="linklabel">
    <a href="#" onclick="javascript:return ajax('/handle/linklabel/click/${select('@id')}');">
        <span class="ui-el-link">
            ${select('@text')}
        </span>
    </a>
</py:match>


<!--! OutLinkLabel widget -->
<py:match path="outlinklabel">
    <a href="${select('@url')}" target="blank">
        <span class="ui-el-link">
            ${select('@text')}
        </span>
    </a>
</py:match>


<!--! TextInput widget -->
<py:match path="textinput">
    <input class="ui-el-input" name="${select('@name')}" value="${dequote(str(select('@value'))) or ''}" id="${select('@id')}" size="${str(select('@size')) or ''}" onkeypress="return noenter()"/>
</py:match>


<!--! CheckBox widget -->
<py:match path="checkbox">
    <input class="ui-el-checkbox" type="checkbox" value="${select('@value')}" name="${select('@name')}" id="${select('@id')}" checked="${'checked' if str(select('@checked'))=='True' else None}" onkeypress="return noenter()"/>
    <span class="ui-el-label-1">
            ${select('@text')}
    </span>
</py:match>

<!--! SelectOption widget -->
<py:match path="selectoption">
    <option value="${select('@value')}" selected="${'selected' if str(select('@selected'))=='True' else None}" onkeypress="return noenter()">
        ${select('@text')}
    </option>
</py:match>

<!--! Radio widget -->
<py:match path="radio">
    <input class="ui-el-radio" type="radio" value="${select('@value')}" name="${select('@name')}" id="${select('@id')}" checked="${'checked' if str(select('@checked'))=='True' else None}" onkeypress="return noenter()"/>
    <span class="ui-el-label-1">
            ${select('@text')}
    </span>
</py:match>


<!--! LayoutTable widget -->
<py:match path="layouttable">
    <table cellspacing="0" style="width: ${str(select('@width')) or 'auto'}; height: ${str(select('@height')) or 'auto'};">
        ${select('node()')}
    </table>
</py:match>

<py:match path="layouttablerow">
    <tr style="width: ${str(select('@width')) or 'auto'}; height: ${str(select('@height')) or 'auto'};">
        ${select('node()')}
    </tr>
</py:match>

<py:match path="layouttablecell">
    <td class="ui-el-layouttable-cell" colspan="${str(select('@colspan'))}" rowspan="${str(select('@rowspan'))}" style="width: ${str(select('@width')) or 'auto'}; height: ${str(select('@height')) or 'auto'}; padding-right: ${str(select('@spacing')) or '4'}px; padding-bottom: ${str(select('@spacing')) or '4'}px">
        ${select('node()')}
    </td>
</py:match>


<!--! DataTable widget -->
<py:match path="datatable">
    <table cellpadding="0" cellspacing="0" class="ui-el-table" style="width: ${str(select('@width')) or 'auto'}; height: ${str(select('@height')) or 'auto'};">
        ${select('node()')}
    </table>
</py:match>

<py:match path="datatablerow">
    <tr class="ui-el-table-row${'-header' if str(select('@header')) else ''}" style="width: ${str(select('@width')) or 'auto'}; height: ${str(select('@height')) or 'auto'};">
        ${select('node()')}
    </tr>
</py:match>

<py:match path="datatablecell">
    <td class="ui-el-table-cell${'-hidden' if str(select('@hidden')) else ''}" colspan="${select('@colspan')}" rowspan="${select('@rowspan')}" style="width: ${str(select('@width')) or 'auto'}; height: ${str(select('@height')) or 'auto'};">
        ${select('node()')}
    </td>
</py:match>


<!--! TreeContainer widget -->
<py:match path="treecontainer">
    <div class="ui-el-treecontainernode">
        <a href="#">
            <div class="ui-el-treecontainernode-title" onclick="javascript:ui_showhide('${select('@id')}');ajaxNoUpdate('/handle/treecontainer/click/${select('@id')}');ui_treeicon('${select('@id')}-btn');return false">
                <div class="ui-el-treecontainernode-button">
                    <img id="${select('@id')}-btn" src="/dl/core/ui/tree-${'minus' if str(select('@expanded'))=='True' else 'plus'}.png" />
                </div>
                ${select('@text')}
            </div>
        </a>
        <div class="ui-el-treecontainernode-inner" id="${select('@id')}" style="${'display:none;' if str(select('@expanded'))!='True' else None}">
            ${select('node()')}
        </div>
    </div>
</py:match>

<py:match path="treecontainernode">
    <div class="ui-el-treecontainernode-title">
        <div class="ui-el-treecontainernode-inner">
            ${select('node()')}
        </div>
    </div>
</py:match>


<!--! ScrollContainer -->
<py:match path="scrollcontainer">
    <div class="ui-el-scrollcontainer" style="width: ${str(select('@width')) or '200'}px; height: ${str(select('@height')) or '200'}px;">
        ${select('node()')}
    </div>
</py:match>


<!--! TextInputArea -->
<py:match path="textinputarea">
    <textarea class="ui-el-textarea" name="${select('@name')}" disabled="${str(select('@disabled')) or None}" style="width: ${str(select('@width')) or '200'}px; height: ${str(select('@height')) or '200'}px;">${dequote(select('@text'))}</textarea>
</py:match>

<!--! Tabs -->
<py:match path="tabheader">
    <a href="#">
        <div class="ui-el-tab-header" id="tabheader-${select('@pid')}-${select('@id')}" onclick="javascript:ui_tabswitch('${select('@pid')}','${select('@id')}')">
            ${select('@text')}
        </div>
    </a>
</py:match>

<py:match path="tabheadernode">
    <tr>
        <td id="${select('@id')}" class="ui-el-tab-header-box">
            ${select('node()')}
        </td>
    </tr>
</py:match>

<py:match path="tabbody">
    <span class="ui-el-tab-body" id="tabbody-${select('@pid')}-${select('@id')}">
        ${select('node()')}
    </span>
</py:match>

<py:match path="tabcontrol">
    <table>
        ${select('node()')}
    </table>
    <script>
        ui_tabswitch('${select('@id')}', '${str(select('@active')) or '0'}');
    </script>
</py:match>


<!--! Progress bar -->
<py:match path="progressbar">
    <table cellspacing="0" cellpadding="0">
        <tr><td style="width:${int(str(select('@width'))) * int(str(select('@value'))) / int(str(select('@max')))}px" class="ui-el-progressbar-active"/>
        <td style="width:${int(str(select('@width'))) - int(str(select('@width'))) * int(str(select('@value'))) / int(str(select('@max')))}px" class="ui-el-progressbar"/></tr>
    </table>
</py:match>

<!-- ElementBox -->
<py:match path="elementbox">
<div class="ui-el-elementbox">
    ${select('node()')}
</div>
</py:match>

</widgets>

